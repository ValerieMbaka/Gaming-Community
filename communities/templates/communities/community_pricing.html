{% extends 'core/base_minimal.html' %}
{% load static %}

{% block title %}Community Pricing Plans - Join Gaming Communities{% endblock %}

{% block dashboard_css %}
    <link rel="stylesheet" href="{% static 'communities/css/communities.css' %}">
    <link rel="stylesheet" href="{% static 'communities/css/community_pricing.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="pricing-hero">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h1 class="display-4 fw-bold mb-3">Choose Your Plan</h1>
                <p class="lead mb-4">Unlock access to exclusive gaming communities, tournaments, and premium features</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Pricing Plans Section -->
<section class="pricing-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="pricing-grid">
                    {% for plan in plans %}
                    <div class="pricing-card {% if plan.popular %}popular{% endif %}">
                        {% if plan.popular %}
                        <div class="popular-badge">
                            <i class="fas fa-star"></i> Most Popular
                        </div>
                        {% endif %}
                        
                        <div class="pricing-header">
                            <h3 class="plan-name">{{ plan.name }}</h3>
                            <div class="price-container">
                                <div class="price">
                                    <span class="currency">{{ plan.currency|default:"Kshs." }}</span>
                                    <span class="amount">{{ plan.price }}</span>
                                    <span class="period">/{{ plan.duration }}</span>
                                </div>
                                {% if plan.original_price %}
                                <div class="original-price">
                                    <span class="strikethrough">{{ plan.currency|default:"Kshs." }}{{ plan.original_price }}</span>
                                    <span class="discount">Save {{ plan.discount }}</span>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="pricing-features">
                            <ul class="features-list">
                                {% for feature in plan.features %}
                                <li class="feature-item">
                                    <i class="fas fa-check feature-icon"></i>
                                    <span>{{ feature }}</span>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        
                        <div class="pricing-actions">
                            <button class="btn btn-primary btn-lg w-100 select-plan-btn" 
                                    data-plan="{{ plan.name }}" 
                                    data-price="{{ plan.price }}"
                                    data-duration="{{ plan.duration }}">
                                <i class="fas fa-credit-card me-2"></i>Select Plan
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Comparison Section -->
<section class="features-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="section-header text-center mb-5">
                    <h2 class="section-title">What's Included</h2>
                    <p class="section-subtitle">All plans include these amazing features</p>
                </div>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4>Community Access</h4>
                        <p>Join exclusive gaming communities and connect with like-minded players</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fab fa-discord"></i>
                        </div>
                        <h4>Discord Integration</h4>
                        <p>Access private Discord channels and voice chat with community members</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h4>Tournaments</h4>
                        <p>Participate in regular tournaments with real prizes and leaderboards</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h4>Gaming Events</h4>
                        <p>Join exclusive gaming events, challenges, and competitions</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h2 class="cta-title">Ready to Join the Community?</h2>
                <p class="cta-subtitle">Choose your plan and start your gaming journey today</p>
                <a href="#pricing" class="btn btn-primary btn-lg">
                    <i class="fas fa-rocket me-2"></i>Get Started Now
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Payment Modal -->
<div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="paymentModalLabel">Complete Your Purchase</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="selected-plan-summary">
                    <h6>Selected Plan:</h6>
                    <div class="plan-details">
                        <span class="plan-name-display"></span>
                        <span class="plan-price-display"></span>
                    </div>
                </div>
                
                <div class="payment-form">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="cardName">Cardholder Name</label>
                                <input type="text" class="form-control" id="cardName" placeholder="John Doe">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="cardNumber">Card Number</label>
                                <input type="text" class="form-control" id="cardNumber" placeholder="1234 5678 9012 3456">
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group mb-3">
                                <label for="expiryMonth">Expiry Month</label>
                                <select class="form-control" id="expiryMonth">
                                    <option value="">MM</option>
                                    {% for month in "123456789101112"|make_list %}
                                    <option value="{{ month|add:'0'|slice:':2' }}">{{ month|add:'0'|slice:':2' }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group mb-3">
                                <label for="expiryYear">Expiry Year</label>
                                <select class="form-control" id="expiryYear">
                                    <option value="">YYYY</option>
                                    {% for year in "2024252627282930"|make_list %}
                                    <option value="202{{ year }}">202{{ year }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group mb-3">
                                <label for="cvv">CVV</label>
                                <input type="text" class="form-control" id="cvv" placeholder="123">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="autoRenew">
                        <label class="form-check-label" for="autoRenew">
                            Auto-renew my subscription
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="processPayment">
                    <i class="fas fa-lock me-2"></i>Pay Securely
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block dashboard_js %}
    <script src="{% static 'communities/js/communities.js' %}"></script>
    <script src="{% static 'communities/js/community_pricing.js' %}"></script>
{% endblock %}
