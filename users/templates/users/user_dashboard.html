{% extends 'core/base_minimal.html' %}
{% load static %}

{% block title %} User Dashboard | GameHub {% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'users/css/dashboard.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}

{% block body %}
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-left">
            <button class="sidebar-toggle-btn" aria-label="Toggle sidebar">
                <i class="fas fa-bars"></i>
            </button>
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search games, communities, friends...">
            </div>
        </div>

        <div class="nav-right">
            <!-- Dark Mode Toggle -->
            <button class="nav-icon theme-toggle-btn" id="darkModeToggle" aria-label="Toggle dark mode" data-tooltip="Dark Mode">
                <i class="fas fa-moon"></i>
                <i class="fas fa-sun"></i>
            </button>

            <!-- Messages Quick Access -->
            <div class="nav-dropdown">
                <button class="nav-icon" title="Messages" data-tooltip="Messages">
                    <i class="fas fa-envelope"></i>
                    <span class="notification-bubble">3</span>
                </button>
                <div class="nav-dropdown-content messages-dropdown">
                    <div class="dropdown-header">
                        <h4>Messages</h4>
                        <button class="mark-all-read">Mark all as read</button>
                    </div>
                    <div class="dropdown-list">
                        <div class="message-item unread">
                            <img src="{% static 'core/images/player1.jpeg' %}" class="message-avatar" alt="User">
                            <div class="message-content">
                                <h5>AlexPro</h5>
                                <p>Hey, are you joining the tournament tonight?</p>
                                <small>2 hours ago</small>
                            </div>
                        </div>
                        <div class="message-item">
                            <img src="{% static 'core/images/player2.jpeg' %}" class="message-avatar" alt="User">
                            <div class="message-content">
                                <h5>GameMaster</h5>
                                <p>Your match is scheduled for tomorrow</p>
                                <small>1 day ago</small>
                            </div>
                        </div>
                    </div>
                    <a href="#" class="dropdown-footer">View All Messages</a>
                </div>
            </div>

            <!-- Notifications Dropdown -->
            <div class="nav-dropdown">
                <button class="nav-icon" title="Notifications" data-tooltip="Notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-bubble">5</span>
                </button>
                <div class="nav-dropdown-content notifications-dropdown">
                    <div class="dropdown-header">
                        <h4>Notifications</h4>
                        <button class="mark-all-read">Mark all as read</button>
                    </div>
                    <div class="dropdown-list">
                        <div class="notification-item unread">
                            <div class="notification-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="notification-content">
                                <p><strong>Tournament Alert:</strong> Valorant Championship starts in 2 hours</p>
                                <small>45 minutes ago</small>
                            </div>
                        </div>
                        <div class="notification-item unread">
                            <div class="notification-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="notification-content">
                                <p><strong>Community:</strong> 3 new members joined your FIFA Pros group</p>
                                <small>2 hours ago</small>
                            </div>
                        </div>
                    </div>
                    <a href="#" class="dropdown-footer">View All Notifications</a>
                </div>
            </div>

            <!-- User Profile Dropdown -->
            <div class="nav-dropdown profile-dropdown">
                <button class="profile-btn" aria-label="User profile">
                    <img src="{% static 'core/images/player.jpeg' %}" class="profile-avatar" alt="User Avatar">
                    <span class="username">MarcKing001</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="nav-dropdown-content profile-dropdown-content">
                    <div class="profile-header">
                        <img src="{% static 'core/images/player.jpeg' %}" class="dropdown-avatar" alt="User Avatar">
                        <div class="profile-info">
                            <h4>MarcKing001</h4>
                            <small>Pro Gamer</small>
                        </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a href="{% url 'users:user_profile' %}" class="dropdown-item">
                        <i class="fas fa-user"></i> View Profile
                    </a>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-user-friends"></i> Friends
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-moon"></i> Dark Mode
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item logout">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="dashboard-wrapper">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <!-- Profile Section at Top -->
            <div class="sidebar-profile">
                <img src="{% static 'core/images/player.jpeg' %}" class="sidebar-avatar" alt="User Avatar">
                <div class="sidebar-profile-info">
                    <h4>MarcKing001</h4>
                    <small>Pro Gamer</small>
                </div>
                <button class="sidebar-profile-toggle">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>

            <!-- Navigation -->
            <nav class="dashboard-nav">
                <!-- Gaming Section -->
                <div class="nav-section">
                    <div class="section-header">
                        <i class="fas fa-gamepad"></i>
                        <span>Gaming</span>
                    </div>
                    <ul>
                        <li>
                            <a href="{% url 'users:user_dashboard' %}" class="active" data-tooltip="Dashboard">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-group">
                            <div class="nav-header" data-tooltip="My Games">
                                <i class="fas fa-gamepad"></i>
                                <span>My Games</span>
                                <i class="dropdown-icon fas fa-chevron-down"></i>
                            </div>
                            <ul class="submenu">
                                <li>
                                    <a href="#" data-tooltip="Valorant">
                                        <img src="{% static 'core/images/valorant-icon.png' %}" class="game-icon" alt="Valorant">
                                        <span>Valorant</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#" data-tooltip="FIFA 23">
                                        <img src="{% static 'core/images/fifa-icon.png' %}" class="game-icon" alt="FIFA">
                                        <span>FIFA 23</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" data-tooltip="Tournaments">
                                <i class="fas fa-trophy"></i>
                                <span>Tournaments</span>
                                <span class="badge">2</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Social Section -->
                <div class="nav-section">
                    <div class="section-header">
                        <i class="fas fa-users"></i>
                        <span>Social</span>
                    </div>
                    <ul>
                        <li class="nav-group">
                            <div class="nav-header" data-tooltip="Communities">
                                <i class="fas fa-users"></i>
                                <span>Communities</span>
                                <i class="dropdown-icon fas fa-chevron-down"></i>
                            </div>
                            <ul class="submenu">
                                <li>
                                    <a href="#" data-tooltip="Valorant Champions">
                                        <i class="fas fa-shield-alt"></i>
                                        <span>Valorant Champions</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#" data-tooltip="FIFA Pros">
                                        <i class="fas fa-futbol"></i>
                                        <span>FIFA Pros</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" data-tooltip="Friends">
                                <i class="fas fa-user-friends"></i>
                                <span>Friends</span>
                                <span class="badge">12</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-tooltip="Messages">
                                <i class="fas fa-envelope"></i>
                                <span>Messages</span>
                                <span class="badge">3</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Profile Section -->
                <div class="nav-section">
                    <div class="section-header">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </div>
                    <ul>
                        <li>
                            <a href="{% url 'users:user_profile' %}" data-tooltip="View Profile">
                                <i class="fas fa-id-card"></i>
                                <span>View Profile</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-tooltip="Statistics">
                                <i class="fas fa-chart-line"></i>
                                <span>Statistics</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-tooltip="Achievements">
                                <i class="fas fa-trophy"></i>
                                <span>Achievements</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        {% block dashboard_content %}
            <!-- Main Content Area -->
            <main class="dashboard-content">
                <!-- Personalized Header -->
                <header class="content-header">
                    <div class="welcome-hero">
                        <h1>Welcome back, Marc!</h1>
                        <p class="subheader">Your gaming stats this week</p>
                        <div class="welcome-stats">
                            <div class="stat-badge">
                                <span class="stat-value">24</span>
                                <span class="stat-label">Hours Played</span>
                            </div>
                            <div class="stat-badge">
                                <span class="stat-value">87%</span>
                                <span class="stat-label">Win Rate</span>
                            </div>
                            <div class="stat-badge">
                                <span class="stat-value">5</span>
                                <span class="stat-label">New Friends</span>
                            </div>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus me-2"></i> New Post
                        </button>
                        <button class="btn btn-outline-primary">
                            <i class="fas fa-gamepad me-2"></i> Start Streaming
                        </button>
                    </div>
                </header>

                <!-- Content Tabs -->
                <nav class="content-tabs">
                    <button class="tab-btn active" data-tab="overview">
                        <i class="fas fa-tachometer-alt me-2"></i>Overview
                    </button>
                    <button class="tab-btn" data-tab="activity">
                        <i class="fas fa-history me-2"></i>Activity
                    </button>
                    <button class="tab-btn" data-tab="performance">
                        <i class="fas fa-chart-line me-2"></i>Performance
                    </button>
                </nav>

                <!-- Tab Content -->
                <div class="tab-content active" id="overview">
                    <!-- Stats Summary -->
                    <section class="stats-summary">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <div class="stat-info">
                                <h3>87%</h3>
                                <p>Win Rate</p>
                            </div>
                            <div class="stat-progress">
                                <div class="progress-bar" style="width: 87%"></div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-info">
                                <h3>2</h3>
                                <p>Active Competitions</p>
                            </div>
                            <div class="stat-progress">
                                <div class="progress-bar" style="width: 30%"></div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3>5</h3>
                                <p>Communities</p>
                            </div>
                            <div class="stat-progress">
                                <div class="progress-bar" style="width: 70%"></div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-hourglass-half"></i>
                            </div>
                            <div class="stat-info">
                                <h3>24h</h3>
                                <p>Play Time</p>
                            </div>
                            <div class="stat-progress">
                                <div class="progress-bar" style="width: 45%"></div>
                            </div>
                        </div>
                    </section>

                    <!-- Quick Actions -->
                    <section class="quick-actions card">
                        <div class="card-header">
                            <i class="fas fa-bolt me-2"></i>
                            <h2>Quick Actions</h2>
                        </div>
                        <div class="card-body">
                            <div class="action-buttons">
                                <button class="action-btn">
                                    <div class="action-icon">
                                        <i class="fas fa-trophy"></i>
                                    </div>
                                    <span>Join Tournament</span>
                                </button>
                                <button class="action-btn">
                                    <div class="action-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <span>Add Friends</span>
                                </button>
                                <button class="action-btn">
                                    <div class="action-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <span>Create Group</span>
                                </button>
                                <button class="action-btn">
                                    <div class="action-icon">
                                        <i class="fas fa-stream"></i>
                                    </div>
                                    <span>Go Live</span>
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- Two Column Layout -->
                    <div class="dashboard-grid">
                        <!-- Left Column -->
                        <div class="main-column">
                            <!-- Recommended Games -->
                            <section class="recommendations card">
                                <div class="card-header">
                                    <i class="fas fa-star me-2"></i>
                                    <h2>Recommended For You</h2>
                                    <a href="#" class="view-all-link ml-auto">
                                        View All <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                                <div class="card-body">
                                    <div class="game-carousel">
                                        <div class="game-card">
                                            <img src="{% static 'core/images/valorant-banner.jpg' %}" alt="Valorant">
                                            <div class="game-info">
                                                <h4>Valorant</h4>
                                                <p>FPS • 5v5</p>
                                                <div class="game-footer">
                                                    <div class="match-percentage">92% Match</div>
                                                    <button class="btn btn-sm btn-outline-primary">Details</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="game-card">
                                            <img src="{% static 'core/images/tekken-banner.jpg' %}" alt="Tekken">
                                            <div class="game-info">
                                                <h4>Tekken 8</h4>
                                                <p>Fighting • 1v1</p>
                                                <div class="game-footer">
                                                    <div class="match-percentage">85% Match</div>
                                                    <button class="btn btn-sm btn-outline-primary">Details</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="game-card">
                                            <img src="{% static 'core/images/fifa-banner.jpg' %}" alt="FIFA">
                                            <div class="game-info">
                                                <h4>FIFA 23</h4>
                                                <p>Sports • 1v1/2v2</p>
                                                <div class="game-footer">
                                                    <div class="match-percentage">78% Match</div>
                                                    <button class="btn btn-sm btn-outline-primary">Details</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Recent Activity -->
                            <section class="activity-feed card">
                                <div class="card-header">
                                    <i class="fas fa-history me-2"></i>
                                    <h2>Recent Activity</h2>
                                    <a href="#" class="view-all-link ml-auto">
                                        View All <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                                <div class="card-body">
                                    <div class="activity-list">
                                        <div class="activity-item">
                                            <img src="{% static 'core/images/player1.jpeg' %}"
                                                class="activity-avatar"
                                                alt="User">
                                            <div class="activity-content">
                                                <h4>Joined <span class="highlight">Valorant Champions</span> community</h4>
                                                <p class="activity-meta">2 hours ago</p>
                                                <div class="activity-actions">
                                                    <button class="btn btn-sm btn-outline-secondary react-btn">
                                                        <i class="far fa-thumbs-up"></i> Like
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary comment-btn">
                                                        <i class="far fa-comment"></i> Comment
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="activity-item">
                                            <img src="{% static 'core/images/player2.jpeg' %}"
                                                class="activity-avatar"
                                                alt="User">
                                            <div class="activity-content">
                                                <h4>Posted in <span class="highlight">FIFA Pros</span> community</h4>
                                                <p class="activity-text">"Looking for teammates for weekend tournament!"</p>
                                                <p class="activity-meta">5 hours ago</p>
                                                <div class="activity-actions">
                                                    <button class="btn btn-sm btn-outline-secondary react-btn">
                                                        <i class="far fa-thumbs-up"></i> Like
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary comment-btn">
                                                        <i class="far fa-comment"></i> Comment
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>

                        <!-- Right Column -->
                        <div class="sidebar-column">
                            <!-- Upcoming Competitions -->
                            <section class="competitions-card card">
                                <div class="card-header">
                                    <i class="fas fa-trophy me-2"></i>
                                    <h2>Upcoming Competitions</h2>
                                    <a href="#" class="view-all-link ml-auto">
                                        View All <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                                <div class="card-body">
                                    <div class="competition-list">
                                        <div class="competition-item">
                                            <img src="{% static 'core/images/valorant-tournament.jpg' %}"
                                                class="competition-image" alt="Valorant">
                                            <div class="competition-info">
                                                <h4>Valorant Weekly</h4>
                                                <p class="competition-meta">
                                                    <i class="fas fa-calendar-alt me-1"></i> Tomorrow, 8:00 PM
                                                </p>
                                                <div class="competition-prize">
                                                    <i class="fas fa-gem me-1"></i> $1,000 Prize Pool
                                                </div>
                                                <div class="countdown-timer">
                                                    <div class="countdown-segment">
                                                        <span class="countdown-value">1</span>
                                                        <span class="countdown-label">Day</span>
                                                    </div>
                                                    <div class="countdown-segment">
                                                        <span class="countdown-value">8</span>
                                                        <span class="countdown-label">Hours</span>
                                                    </div>
                                                </div>
                                                <button class="btn btn-sm btn-primary btn-block mt-2">
                                                    Register Now
                                                </button>
                                            </div>
                                        </div>
                                        <div class="competition-item">
                                            <img src="{% static 'core/images/fifa-tournament.jpg' %}"
                                                class="competition-image" alt="FIFA">
                                            <div class="competition-info">
                                                <h4>FIFA Weekend Cup</h4>
                                                <p class="competition-meta">
                                                    <i class="fas fa-calendar-alt me-1"></i> Saturday, 3:00 PM
                                                </p>
                                                <div class="competition-prize">
                                                    <i class="fas fa-gem me-1"></i> $500 Prize Pool
                                                </div>
                                                <div class="countdown-timer">
                                                    <div class="countdown-segment">
                                                        <span class="countdown-value">3</span>
                                                        <span class="countdown-label">Days</span>
                                                    </div>
                                                    <div class="countdown-segment">
                                                        <span class="countdown-value">15</span>
                                                        <span class="countdown-label">Hours</span>
                                                    </div>
                                                </div>
                                                <button class="btn btn-sm btn-outline-primary btn-block mt-2">
                                                    View Details
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Friends Activity -->
                            <section class="friends-activity card">
                                <div class="card-header">
                                    <i class="fas fa-user-friends me-2"></i>
                                    <h2>Friends Activity</h2>
                                    <a href="#" class="view-all-link ml-auto">
                                        View All <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                                <div class="card-body">
                                    <div class="friends-list">
                                        <div class="friend-item">
                                            <img src="{% static 'core/images/player3.jpeg' %}"
                                                 class="friend-avatar"
                                                 alt="Friend">
                                            <div class="friend-info">
                                                <h4>AlexPro</h4>
                                                <p>Playing Valorant</p>
                                                <small>30 minutes ago</small>
                                            </div>
                                            <button class="btn btn-sm btn-outline-secondary">
                                                Join
                                            </button>
                                        </div>
                                        <div class="friend-item">
                                            <img src="{% static 'core/images/player4.jpeg' %}"
                                                 class="friend-avatar"
                                                 alt="Friend">
                                            <div class="friend-info">
                                                <h4>GameMaster</h4>
                                                <p>Won FIFA tournament</p>
                                                <small>2 hours ago</small>
                                            </div>
                                            <button class="btn btn-sm btn-outline-secondary">
                                                Congrats
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>

                <!-- Activity Tab Content -->
                <div class="tab-content" id="activity">
                    <section class="card">
                        <div class="card-header">
                            <i class="fas fa-history me-2"></i>
                            <h2>Full Activity Feed</h2>
                        </div>
                        <div class="card-body">
                            <div class="activity-list">
                                <!-- Expanded activity items would go here -->
                                <div class="empty-state">
                                    <i class="fas fa-history"></i>
                                    <h3>No recent activity</h3>
                                    <p>Your gaming activity will appear here</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Performance Tab Content -->
                <div class="tab-content" id="performance">
                    <section class="card">
                        <div class="card-header">
                            <i class="fas fa-chart-line me-2"></i>
                            <h2>Performance Metrics</h2>
                        </div>
                        <div class="card-body">
                            <div class="performance-metrics">
                                <!-- Performance charts would go here -->
                                <div class="empty-state">
                                    <i class="fas fa-chart-pie"></i>
                                    <h3>No performance data yet</h3>
                                    <p>Play some games to see your stats</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        {% endblock %}
    </div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'users/js/dashboard.js' %}"></script>
{% endblock %}