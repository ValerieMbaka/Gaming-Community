{% load static %}

<div class="profile-completion-container">
    <div class="profile-completion-card">
        <div class="card-header">
            <h2>Complete Your Profile</h2>
            <p>Tell us about yourself to get started</p>
        </div>
        <div class="profile-form">
            <form id="profileForm" method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Profile Picture Section -->
                <div class="form-section">
                    <label>Avatar <small class="text-muted">(optional)</small></label>
                    <div class="avatar-upload">
                        <input type="file" name="profile_picture" id="id_profile_picture" accept="image/*">
                        <label for="id_profile_picture" class="avatar-upload-label">
                            <i class="fas fa-camera"></i>
                            <span>Choose Avatar</span>
                        </label>
                    </div>
                    <small class="form-text">Upload a profile picture (JPG, PNG, GIF up to 5MB)</small>
                </div>

            <!-- Username Section -->
            <div class="form-section">
                <label for="id_custom_username">Custom Username <span class="required">*</span></label>
                <div class="username-input-group">
                    <input type="text" name="custom_username" id="id_custom_username" 
                           value="{{ form.custom_username.value|default:'' }}" 
                           placeholder="Enter your username" required>
                    <button type="button" id="generateUsernameBtn" class="generate-btn">
                        <i class="fas fa-dice"></i>
                    </button>
                </div>
                <div id="custom_username-error" class="error-message"></div>
                <small class="form-text">3-20 characters, letters, numbers, and underscores only</small>
            </div>

            <!-- Bio Section -->
            <div class="form-section">
                <label for="id_bio">Bio <span class="required">*</span></label>
                <input type="text" name="bio" id="id_bio" 
                       value="{{ form.bio.value|default:'' }}" 
                       placeholder="Tell us about yourself in one line" required>
                <div id="bio-error" class="error-message"></div>
                <small class="form-text">10-160 characters, single line</small>
            </div>

            <!-- About Section -->
            <div class="form-section">
                <label for="id_about">About <small class="text-muted">(optional)</small></label>
                <textarea name="about" id="id_about" rows="4" 
                          placeholder="Tell us more about yourself, your gaming experience, and what you're looking for in the community">{{ form.about.value|default:'' }}</textarea>
                <div class="char-counter">
                    <span id="aboutCounter">0</span>/500
                </div>
                <small class="form-text">30-500 characters, supports emojis and line breaks</small>
            </div>

            <!-- Date of Birth Section -->
            <div class="form-section">
                <label for="id_date_of_birth">Date of Birth <span class="required">*</span></label>
                <input type="date" name="date_of_birth" id="id_date_of_birth"
                       value="{{ form.date_of_birth.value|date:'Y-m-d'|default:'' }}" required>
                <div id="date_of_birth-error" class="error-message"></div>
                <small class="form-text">Required for age verification and community features</small>
            </div>

            <!-- Location Section -->
            <div class="form-section">
                <label for="id_location">Location <span class="required">*</span></label>
                <input type="text" name="location" id="id_location"
                       value="{{ form.location.value|default:'' }}" 
                       placeholder="City, Country" required>
                <div id="location-error" class="error-message"></div>
                <small class="form-text">Help us connect you with local gamers</small>
            </div>

            <!-- Platforms Section -->
            <div class="form-section">
                <label>Gaming Platforms <span class="required">*</span></label>
                <div class="chips" id="platformsTags"></div>
                <input type="hidden" name="platforms" id="id_platforms" value="{{ form.platforms.value|default:'[]' }}">
                <div id="platforms-error" class="error-message"></div>
                <small class="form-text">Select the platforms you game on</small>
            </div>

            <!-- Games Section -->
            <div class="form-section">
                <label>Favorite Games <span class="required">*</span></label>
                <div class="chips" id="gamesTags"></div>
                <div class="game-input-container">
                    <input type="text" id="gameInput" placeholder="Add a game..." class="game-input">
                    <small class="form-text">Type and press Enter to add custom games</small>
                </div>
                <input type="hidden" name="games" id="id_games" value="{{ form.games.value|default:'[]' }}">
                <div id="games-error" class="error-message"></div>
                <small class="form-text">Select your favorite games or add custom ones</small>
            </div>

            <!-- Submit Button -->
            <div class="form-actions">
                <button type="submit" class="save-btn">Save Details</button>
            </div>
        </form>
        </div>
    </div>
</div>